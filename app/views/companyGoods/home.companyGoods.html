<!-- BEGIN PAGE -->
<div class="page-content">

    <!-- BEGIN PAGE CONTAINER-->
    <div class="container-fluid">

        <!-- BEGIN PAGE HEADER-->
        <div class="row-fluid">

            <div class="span12">

                <!-- BEGIN PAGE TITLE & BREADCRUMB-->
                <h3 class="page-title">

                   Products
                    <small>商品管理</small>

                </h3>

                <ul class="breadcrumb">

                    <li>
                        <i class="icon-home"></i>
                        <a ui-sref="home.index">首页</a>
                        <i class="icon-angle-right"></i>
                    </li>

                    <li><a href="#">商品列表</a></li>
                </ul>
            </div>

        </div>

        <div class="row-fluid">

            <div class="span12">

                <!-- BEGIN EXAMPLE TABLE PORTLET-->

                <div class="portlet box grey">

                    <div class="portlet-title">
                        <div class="caption"><i class="icon-globe"></i>商品列表</div>
                        <div class="actions">

                            <a ui-sref="home.companyGoodsDetail({goods_id:0})" class="btn blue"><i class="icon-pencil"></i> 创建</a>

                        </div>
                    </div>
                    <div class="portlet-body">
                        <div id="sample_1_wrapper" class="dataTables_wrapper form-inline" role="grid">
                            <div class="row-fluid">

                                <div style="float: left;line-height: 40px;height: 40px;margin-left: 30px;font-size: 14px;">
                                    <div style="float: left"> 商品状态:</div>
                                    <div ng-repeat="item in orderStatue" style="float: left">

                                        <span ng-if="item.select"  ng-click="" style="margin-left:20px;cursor: pointer;color: #fff;background: #4d90fe;padding: 5px;"  ng-click="selectStatue(item)">{{item.company_goods_status_name}}</span>
                                        <span ng-if="!item.select"  ng-click="selectStatue(item)" style="margin-left:20px;cursor: pointer" ng-click="selectStatue(item)">{{item.company_goods_status_name}}</span>
                                    </div>
                                </div>


                                <form class="form-search pull-right">
                                    <div class="input-append">
                                       <input class="m-wrap" type="text" ng-model="company_goods_name" placeholder="商品名称">
                                        <button class="btn green" type="submit" ng-click="loadByGoodsName()"><strong>搜索</strong></button>
                                    </div>
                                </form>
                            </div>
                            <form  ng-submit="filter()"  class="pull-right" style="width: 100%;">
                                <div style="float: left;margin-left:30px">起始时间：
                                    <div class="input-append date form_datetime">
                                        <input type="text" class="m-wrap span12" data-date-format="yyyy-mm-dd" ng-model="conditionParams.dateStart" id="dpStart" >
                                        <span class="add-on"><i class="icon-calendar"></i></span>
                                    </div>
                                </div>
                                <div style="float: left;margin-left: 50px">结束时间：
                                    <div class="input-append date form_datetime">
                                        <input type="text" class="m-wrap span12" data-date-format="yyyy-mm-dd" ng-model="conditionParams.dateEnd" id="dpEnd" >
                                        <span class="add-on"><i class="icon-calendar"></i></span>
                                    </div>
                                </div>


                                <!--<div style="float: left;margin-left: 50px;">商品状态：<select-->
                                        <!--style=" background-color: transparent; border: 1px solid #dddddd;width: 150px; "-->
                                        <!--ng-model="conditionParams.company_goods_status_id"-->
                                        <!--ng-options="o.company_goods_status_id as o.company_goods_status_name for o in goodsStatusOptions">-->
                                <!--</select>-->
                                <!--</div>-->
                                <button ng-click="loadByCondition()" class="btn green" type="submit" style="float: right;"><strong>按条件筛选</strong></button>
                                <!--<button type="submit" class="btn btn-primary" style="float: left;margin-left: 30px;">按条件筛选</button>-->
                            </form>
                            <table class="table table-striped table-bordered table-hover dataTable"
                                   id="sample_1"
                                   aria-describedby="sample_1_info">
                                <thead>

                                <tr role="row">
                                    <th class="sorting" role="columnheader" tabindex="0" aria-controls="sample_1" rowspan="1"
                                        colspan="1" aria-label="Username: activate to sort column ascending"
                                        style="width: 100px;">商品名称
                                    </th>
                                    <th class="sorting" role="columnheader" tabindex="0"
                                        aria-controls="sample_1" rowspan="1" colspan="1"
                                        aria-label="Points: activate to sort column ascending" style="min-width: 50px">
                                        商品logo
                                    </th>
                                    <th class="hidden-480 sorting_disabled" role="columnheader" rowspan="1" colspan="1"
                                        aria-label="Joined">商品产地
                                    </th>
                                    <th class="hidden-480 sorting_disabled" role="columnheader" rowspan="1" colspan="1"
                                        aria-label="Joined">商品规格
                                    </th>
                                    <th class="hidden-480 sorting_disabled" role="columnheader" rowspan="1" colspan="1"
                                        aria-label="Joined">支持快递
                                    </th>
                                    <th class="hidden-480 sorting_disabled" role="columnheader" rowspan="1" colspan="1"
                                        aria-label="Joined">
                                        商品属性
                                    </th>
                                    <th class="hidden-480 sorting_disabled" role="columnheader" rowspan="1" colspan="1"
                                        aria-label="Joined">商品状态
                                    </th>
                                    <th class="hidden-480 sorting_disabled" role="columnheader" rowspan="1" colspan="1"
                                        aria-label="Joined" style="text-align: center;width:80px;">操作</th>
                                </tr>
                                </thead>

                                <tbody role="alert" aria-live="polite" aria-relevant="all">
                                <tr class="gradeX odd" ng-repeat="item in goods"
                                    ng-class="{'odd':$odd,'even':$even}" ng-if="item.statue!=0">
                                    <td class=" "><a ng-click="getDetail(item.company_goods_id)">{{item.company_goods_name}}</a></td>
                                    <td class="center hidden-480 "><img ng-src="{{item.company_goods_icon}}" style="width: 50px"></td>
                                    <td class="center hidden-480 ">{{item.company_goods_place}}</td>
                                    <td class="center hidden-480 ">
                                        <table>
                                           <tr>
                                               <td style="background-color: #fff;border: none">规格</td>
                                               <td style="background-color: #fff;border: none">价格</td>
                                               <td style="background-color: #fff;border: none">库存</td>
                                               <td style="background-color: #fff;border: none">入库初始值</td>
                                               <td style="background-color: #fff;border: none">发货频率</td>
                                               <td style="background-color: #fff;border: none">昨日销量</td>
                                           </tr>
                                            <tr ng-repeat="sku in  item.skuArr">
                                                <td style="background-color: #fff;border: none">{{sku.company_goods_norms}}</td>
                                                <td style="background-color: #fff;border: none">{{sku.company_goods_price}}</td>
                                                <td style="background-color: #fff;border: none">{{sku.company_goods_left_quantity}}</td>
                                                <td style="background-color: #fff;border: none">{{sku.init_quantity}}</td>
                                                <td style="background-color: #fff;border: none">{{sku.frequency}}</td>
                                                <td style="background-color: #fff;border: none" ng-if="sku.total">{{sku.total}}</td>
                                                <td style="background-color: #fff;border: none" ng-if="!sku.total">0</td>
                                            </tr>
                                        </table>

                                    </td>
                                    <td class="center hidden-480 ">{{item.company_goods_send}}</td>
                                    <td class="center hidden-480 ">{{item.company_goods_fresh}}</td>
                                    <td class="center hidden-480 ">{{item.company_goods_status_name}}</td>
                                    <td style="text-align: center" class="center hidden-480 ">
                                        <a ng-click="getDetail(item.company_goods_id)"><div >详情</div></a>
                                        <a><div ng-click="editor($index)">修改</div></a>
                                        <a><div ng-click="del($index)">删除</div></a>
                                    </td>
                                </tr>

                                </tbody>
                            </table>
                            <div class="row-fluid">
                                <div class="span6">
                                    <div class="dataTables_info" id="sample_1_info">当前 {{pageStart}} 到 {{pageEnd}} 共 {{count}} 条记录
                                    </div>
                                </div>
                                <!--<div class="pull-right"><button ng-click="sendThisPage()" class="btn-primary">勾选项发货</button></div>-->
                                <div class="span6" style="text-align: center;width: 100%;">
                                    <div class="dataTables_paginate paging_bootstrap pagination">
                                        <pagination>
                                            <ul num-pages="numPages" current-page="currentPage"
                                                on-select-page="selectPage(page)">
                                                <li class="prev" ng-class="{disabled: noPrevious()}"><a
                                                        ng-click="selectPrevious()">&laquo; </a>
                                                </li>
                                                <li ng-if="judge(page,$index)" ng-repeat="page in pages" ng-class="{active: isActive(page)}"><a
                                                        ng-click="selectPage(page)" ng-if="!point[$index]">{{page}}</a> <span ng-if="point[$index]">...</span></li>
                                                <li class="next" ng-class="{disabled: noNext()}"><a
                                                        ng-click="selectNext()"> &raquo; </a>
                                                </li>
                                            </ul>
                                        </pagination>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="delModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="position: fixed">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"></button>
                <h4 class="modal-title" id="notifyModalLabel">操作提醒</h4>
            </div>
            <div class="modal-body">
                {{notifyContent}}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-red" ng-click="update()">删除</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="editorModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="position: fixed">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"></button>
                <h4 class="modal-title">操作提醒&nbsp&nbsp&nbsp&nbsp</h4>

            </div>
            <div class="modal-body">
                <span ng-if="flag" style="color: red;">此商品正在做活动，只能修改库存，或者选择暂停活动可修改全部</span>
                <table style="width: 100%">
<!--//HEAD-->
<!--
                    <tr><th>规格/单位</th><th ng-if="company_type==0">底价</th><th ng-if="company_type==1">进价</th><th ng-if="selectedGood.billing_type==0">售价</th><th>库存</th><th>入库初始值</th><th>发货频率</th></tr>
-->
<!--//-->
                    <tr><th>规格/单位</th><th ng-if="company_type==0">底价</th><th ng-if="company_type==1">进价</th><th ng-if="selectedGood.billing_type==0">售价</th><th>库存</th><th>入库初始值</th><th>发货频率</th><th>运费模板</th></tr>
<!--//yunfei-->
                    <tr ng-repeat="item in sku" style="text-align: center" ng-if="item.status==1" class="sku_table">
                        <td>{{item.company_goods_norms}}</td>

                        <td ng-if="company_type==0"><input value="{{item.lowest_price}}" ng-model="item.lowest_price" ng-disabled="selectedGood.company_goods_status_id==2 ||flag==true " ></td>
                        <td ng-if="company_type==1"><input value="{{item.in_price}}" ng-model="item.in_price" ng-disabled="selectedGood.company_goods_status_id==2 || flag==true" ></td>
                        <td ng-if="selectedGood.billing_type==0"><input value="{{item.company_goods_price}}{{item.lowest_price}}" ng-model="item.company_goods_price" placeholder="0" ng-disabled="flag==true"></td>
                        <td><input value="{{item.company_goods_left_quantity}}" ng-model="item.company_goods_left_quantity" ></td>
                        <td><input value="{{item.init_quantity}}" ng-model="item.init_quantity"  ng-disabled="flag==true"></td>
                        <td><input value="{{item.frequency}}" ng-model="item.frequency" ng-disabled="flag==true"></td>
                        <td><select ng-model="item.deliveryTemplateId"
                                    ng-options="o.deliveryTemplateId as o.deliveryTemplateName for o in deliveryTemplates " style="width: auto;"
                                ></select></td>
                        <td>
                    </tr>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-red" ng-click="chgQuantity()">修改</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="updateInformation" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="position: fixed">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"></button>
                <h4 class="modal-title">平台新功能提醒</h4>

            </div>
            <div class="modal-body">
                <dl>
                    <dt>新增店铺管理</dt>
                    <dt>新增批量发货</dt>
                </dl>
            </div>
            <div class="modal-footer">
                <input type="checkbox" name="checkbox" ng-click="chgFlag()" ng-true-value="true" ng-false-value="false" ng-model="updateFlag"><span style="color: red">下次不再显示</span>
                <button type="button" class="btn btn-default" ng-click="updateDetail()">详情</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">我知道了</button>
            </div>
        </div>
    </div>
</div>