<!-- BEGIN PAGE -->
<div class="page-content">

    <!-- BEGIN PAGE CONTAINER-->
    <div class="container-fluid">

        <!-- BEGIN PAGE HEADER-->

            <div class="row-fluid">
            <div class="span12">

                <!-- BEGIN PAGE TITLE & BREADCRUMB-->
                <h3 class="page-title">
                    商品详情
                </h3>

                <ul class="breadcrumb">
                    <li>
                        <i class="icon-home"></i>
                        <a ui-sref="home.index">首页</a>
                        <i class="icon-angle-right"></i>
                    </li>
                    <li>
                        <a ui-sref="home.activity({page:1})">商品详情</a>
                        <i class="icon-angle-right"></i>
                    </li>
                    <li>详细</li>
                </ul>
                <!-- END PAGE TITLE & BREADCRUMB-->
            </div>

        </div>

        <div class="row-fluid">

            <div class="span12">

                <!-- BEGIN EXAMPLE TABLE PORTLET-->

                <div class="portlet box grey" style="border: 1px solid #9d9c9c">

                    <div class="portlet-body form">

                        <!-- BEGIN FORM-->

                        <form  class="form-horizontal form-bordered"  enctype="multipart/form-data" >
                            <div class="control-group">
                                <label class="control-label">商品logo</label>
                                <div class="controls">
                                   <img  ngf-thumbnail="covers"  ngf-pattern=="image/*" style="width: 300px" ng-if="covers">
                                    <img src="../../media/image/image5.jpg" style="width: 200px" ng-if="!covers">
                                    <div style="margin-top:20px">
                                        <button type="submit" ngf-select ng-keep="true" ngf-change="upload($files, $file, $newFiles, $duplicateFiles, $invalidFiles, $event)" class="btn blue"  ng-show="good.company_goods_status_id!=1&&good.company_goods_status_id!=2">选择</button>
                                    </div>
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label">
                                    商品名称</label>

                                <div class="controls">
                                    <input value="{{good.company_goods_name}}" ng-model="good.company_goods_name" placeholder="请输入商品名称" style="width: 100%;border: none" ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2">

                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label">
                                    商品简介</label>

                                <div class="controls">
                                    <input value="{{good.company_goods_desc}}" ng-model="good.company_goods_desc" placeholder="请输入商品简介" style="width: 100%;border: none" ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2">

                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label">原产地</label>
                                <div class="controls">
                                    <input value="{{good.company_goods_place}}" ng-model="good.company_goods_place" placeholder="请输入原产地" style="width: 100%;border: none" ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2">
                                </div>
                            </div>
                            <div class="control-group" >
                                <label class="control-label">仓库所在地</label>
                                <div class="controls" style="margin-top:10px">
                                    <select ng-model="province.province_id"
                                            ng-options="o.province_id as o.province_name for o in provinces" ng-change="getCitiesByProvinceId(province.province_id)" ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2"></select>
                                    <select ng-model="good.repertory_place"
                                            ng-options="o.city_id as o.city_name for o in CitiesByProvinceId" ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2"></select>
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label">可售区域选择</label>
                                <div class="controls">
                                    <span >{{good.areas_name}}<a><span ng-click="loadProvince($index)">编辑</span></a></span>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">商品种类</label>
                                <div class="controls">
                                    <select ng-model="good.company_goods_category_id"
                                            ng-options="o.categories_id as o.category_name for o in cateArr " ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2">
                                    </select>
                                </div>
                            </div>
                            <div class="control-group">
                                <label class="control-label">销售类型</label>
                                <div class="controls">
                                    <select ng-model="good.sales_type"
                                            ng-options="o.id as o.salesName for o in salesType " ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2">
                                    </select>
                                </div>
                            </div>
                            <div class="control-group" >
                                <div  ng-show="good.sales_type==1">
                                    <label class="control-label">发货时间</label>
                                    <div class="controls">
                                        <div class="input-append date form_datetime " >
                                            <input type="text" class="m-wrap span12" data-date-format="yyyy-mm-dd" id="dpStart" ng-model="good.pre_delivery_time" ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2">
                                            <span class="add-on"><i class="icon-calendar"></i></span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label">可以快递</label>
                                <div class="controls">
                                    <select ng-model="good.company_goods_send"
                                            ng-options="o.id as o.name for o in sends " ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2">
                                    </select>
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label">可以中转</label>
                                <div class="controls">
                                    <select ng-model="good.company_goods_repeat_send"
                                            ng-options="o.id as o.name for o in repeat_send " ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2">
                                    </select>
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label">保存温度</label>
                                <div class="controls">
                                    <select ng-model="good.temperature"
                                            ng-options="o.id as o.name for o in temperatures " ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2">
                                    </select>
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label">保存时间</label>
                                <div class="controls">
                                    <input value="{{good.save_days}}" ng-model="good.save_days" style="border: none;border-bottom: 1px solid #eee;width: 50px" ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2">
                                    /天
                                </div>
                            </div>



                            <div class="control-group">
                                <label class="control-label">商品描述</label>
                                <div class="controls">
                                  <textarea ng-model="good.company_goods_details" value="good.company_goods_details" maxlength="128" style="width: 90%;
                                  height: 200px;border: none" placeholder="最多128个字" ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2"></textarea>
                                </div>
                            </div>


                            <div class="control-group">
                                <label class="control-label">商品规格</label>
                                <div class="controls"  style="text-align: center">
                                    <table style="width: 100%">
<!--HEAD-->
                                        <!--<tr><th>规格/单位</th><th ng-if="company_type==0">底价</th><th ng-if="company_type==1">进价</th><th>售价</th><th ng-if="good.sales_type==1">预售价</th><th>库存</th><th>入库初始值</th><th>发货频率</th><th>操作</th></tr>
                                        <tr ng-repeat="item in good.sku" style="text-align: center" ng-if="item.status==1" class="sku_table">
                                            <td><input value="{{item.norms}}" ng-model="item.norms" ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2">/<input value="{{item.unit}}" ng-model="item.unit"  ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2"></td>

                                            <td ng-if="company_type==0"><input value="{{item.lowest_price}}" ng-model="item.lowest_price"  ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2"></td>
                                            <td ng-if="company_type==1"><input value="{{item.in_price}}" ng-model="item.in_price" ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2"></td>
                                            <td><input value="{{item.company_goods_price}}" ng-model="item.company_goods_price" ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2"></td>
                                            <td ng-if="good.sales_type==1"><input value="{{item.pre_price}}" ng-model="item.pre_price" ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2"></td>
                                            <td><input value="{{item.company_goods_left_quantity}}" ng-model="item.company_goods_left_quantity" ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2"></td>
                                            <td><input value="{{item.init_quantity}}" ng-model="item.init_quantity" ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2"></td>
                                            <td><input value="{{item.frequency}}" ng-model="item.frequency" ng-disabled="good.company_goods_status_id==1 ||good.company_goods_status_id==2"></td>-->
<!--//-->
                                        <tr><th>规格/单位</th><th ng-if="company_type==0">底价</th><th ng-if="company_type==1">进价</th><th>售价</th><th ng-if="good.sales_type==1">预售价</th><th>库存</th><th>入库初始值</th><th>发货频率</th><th>运费模板选择</th><th>操作</th></tr>
                                        <tr ng-repeat="item in good.sku" style="text-align: center" ng-if="item.status==1" class="sku_table">
                                            <td><input value="{{item.norms}}" ng-model="item.norms" >/<input value="{{item.unit}}" ng-model="item.unit" ></td>
                                            <td ng-if="company_type==0"><input value="{{item.lowest_price}}" ng-model="item.lowest_price" ></td>
                                            <td ng-if="company_type==1"><input value="{{item.in_price}}" ng-model="item.in_price" ></td>
                                            <td><input value="{{item.company_goods_price}}" ng-model="item.company_goods_price" ></td>
                                            <td ng-if="good.sales_type==1"><input value="{{item.pre_price}}" ng-model="item.pre_price" ></td>
                                            <td><input value="{{item.company_goods_left_quantity}}" ng-model="item.company_goods_left_quantity" ></td>
                                            <td><input value="{{item.init_quantity}}" ng-model="item.init_quantity" ></td>
                                            <td><input value="{{item.frequency}}" ng-model="item.frequency" ></td>
                                            <td><select ng-model="item.deliveryTemplateId"
                                                        ng-options="o.deliveryTemplateId as o.deliveryTemplateName for o in deliveryTemplates "
                                                    style="width: auto"></select></td>
<!--yunfei-->
                                            <td>
                                                <button type="submit" class="btn red"  style="margin-left:20px" ng-click="delNorm($index)" ng-show="good.company_goods_status_id!=1 &&good.company_goods_status_id!=2">删除</button>
                                            </td>
                                        </tr>
                                    </table>
                                    <button  class="btn blue" style="margin-top: 20px" ng-click="addNorm()" ng-show="good.company_goods_status_id!=1 &&good.company_goods_status_id!=2">新增</button>
                                </div>
                            </div>

                            <div class="control-group">
                                <label class="control-label">商品图片</label>
                                <div class="controls" style="text-align: center">
                                    <table>
                                        <tr><th>图片</th><th>操作</th></tr>
                                        <tr ng-repeat="img in files" style="text-align: center;">
                                            <td style="width: 60%;">
                                                <img ngf-thumbnail="img"  ngf-pattern=="image/*"   ng-if="img">
                                            </td>
                                            <td style="width: 40%">
                                                <button type="submit" class="btn blue" ngf-select ngf-change="replace($file,$index)" ng-show="good.company_goods_status_id!=1 &&good.company_goods_status_id!=2">更换</button>
                                                <button type="submit" class="btn red"  style="margin-left:20px" ng-click="drop($index)" ng-show="good.company_goods_status_id!=1 &&good.company_goods_status_id!=2">删除</button>
                                            </td>
                                        </tr>
                                    </table>
                                    <button  class="btn blue" style="margin-top:20px"  type="file"  ngf-select   ng-model="files" ngf-multiple="true" ngf-keep="true"
                                            ngf-change="uploadDetail($files, $file)" ng-show="good.company_goods_status_id!=1 &&good.company_goods_status_id!=2">新增</button>
                                </div>
                            </div>
                            <div class="control-group" ng-if="goods_id!=0">
                                <label class="control-label">商品状态</label>
                                <div class="controls">
                                  {{good.company_goods_status_name}}
                                </div>
                            </div>
                            <div class="control-group" ng-if="goods_id!=0">
                                <label class="control-label">审核结果</label>
                                <div class="controls" ng-if="good.auditResult">
                                  {{good.auditResult}}
                                </div>
                                <div class="controls" ng-if="!good.auditResult">
                                    未审核
                                </div>
                            </div>
                            <div class="form-actions" ng-if="good.company_goods_status_id!=1&&good.company_goods_status_id!=2">
                                <button type="submit" class="btn blue" ng-click="save(10)">保存</button>
                                <button type="submit" class="btn" ng-click="save(1)" style="margin-left:20px">提交审核</button>
                            </div>
                            <div class="form-actions" ng-if="good.company_goods_status_id==2">
                                <button type="submit" class="btn blue" ng-click="update(3)">下架</button>
                            </div>
                            <div class="form-actions" ng-if="good.company_goods_status_id==1">
                                <button type="submit" class="btn blue" ng-click="update(10)">取消审核</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="notifyModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="notifyModalLabel">操作提醒</h4>
            </div>
            <div class="modal-body">
                {{notifyContent}}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">好的</button>
                <!--<button type="button" class="btn btn-primary" ng-click="delivery(deliveryIndex,deliveryId)" data-dismiss="modal">确定</button>-->
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="provinceModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="width:700px;" ng-click="hideAll()">
    <div class="modal-dialog" style="width:700px;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"></button>
                <h4 class="modal-title" >操作提醒</h4>
            </div>
            <div class="modal-body">

                <form>
                    <table>
                        <tr ng-repeat="item in china">
                            <td ><input type="checkbox" ng-click="selectAllProvince(item)"  ng-model="item.flag" >{{item.name}}</td>
                            <td ng-repeat="province in item.province" style="position: relative">
                                <div ng-style="province.myStyle">
                                    <input type="checkbox" ng-change="selectProvince(item,province)"  ng-model="province.flag" >
                                    <span >{{province.province_name}}</span>
                                    <span ng-click="toggle(province)"><img src="{{localImageIp}}/image/pyuding-ice01.png" /></span>
                                </div>
                                <div class="city">
                                    <div ng-show="province.visible" ng-repeat="city in cities[province.province_id-1].cities" style="float:left; padding:0 5px;">
                                        <input type="checkbox" ng-click="selectCities(item,province,city)"  ng-model="city.flag">
                                        <span >{{city.city_name}}</span>
                                    </div>
                                </div>


                            </td>
                        </tr>
                    </table>
                </form>
                <div class="modal-footer">
                    <button type="button" class="btn btn-red" ng-click="saveCities()" data-dismiss="modal">确认</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="cancel()">取消</button>
                </div>
            </div>
        </div>
    </div>
</div>